{% extends "pmksy/base.html" %}

{% block title %}{{ wizard.name }} Import{% endblock %}

{% block content %}
<h1>{{ wizard.name }} &ndash; Upload File</h1>
<p>Upload a CSV, Excel, or JSON file exported from the PMKSY survey.</p>

{% if expected_fields %}
    <section class="field-guidance">
        <h2>Prepare your file</h2>
        <p>Include a header row with the following columns. Fields marked <span class="required-badge">Required</span> must be provided.</p>
        <ul class="field-list">
            {% for field in expected_fields %}
                <li>
                    <span class="field-title">{{ field.label }}</span>
                    <span class="field-column">Column name: <code>{{ field.name }}</code></span>
                    {% if field.required %}
                        <span class="required-badge">Required</span>
                    {% endif %}
                    {% if field.help_text %}
                        <span class="field-note">{{ field.help_text }}</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </section>
{% endif %}

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <div class="actions">
        <button type="submit">Upload &amp; Preview</button>
        <a href="{% url 'pmksy:import-home' %}">Back to all imports</a>
    </div>
</form>
{% endblock %}
